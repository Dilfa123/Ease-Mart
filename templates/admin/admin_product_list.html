{% load static %}
<!DOCTYPE html>
<html class="light" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin Dashboard - Product Management</title>

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: "#0a4d94",
        "background-light": "#f6f7f8",
        "background-dark": "#101922",
      },
      fontFamily: {
        display: ["Inter", "sans-serif"]
      },
      borderRadius: {
        DEFAULT: "0.5rem",
        lg: "1rem",
        xl: "1.5rem",
      },
    },
  },
}
</script>
</head>

<body class="bg-background-light font-display">
<div class="flex min-h-screen">

<!-- SIDEBAR -->
<aside class="flex w-64 flex-col bg-primary text-white p-4">
  <div class="flex items-center gap-3 p-3 mb-6">
    <span class="material-symbols-outlined text-3xl">shield</span>
    <div>
      <h1 class="font-bold">Admin Panel</h1>
      <p class="text-sm text-white/80">Management</p>
    </div>
  </div>

  <nav class="flex flex-col gap-2 flex-grow">
    <a href="{% url 'admin_dashboard' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
      <span class="material-symbols-outlined">dashboard</span> Dashboard
    </a>

    <a href="{% url 'admin_user' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
      <span class="material-symbols-outlined">group</span> Users
    </a>

    <a href="{% url 'admin_product_list' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg bg-white/20 font-bold">
      <span class="material-symbols-outlined" style="font-variation-settings:'FILL' 1">inventory_2</span>
      Products
    </a>

    <a href="{% url 'admin_category_list' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
      <span class="material-symbols-outlined">category</span> Categories
    </a>

    <a href="{% url 'admin_coupon_list' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
      <span class="material-symbols-outlined">sell</span> Coupons
    </a>
    <a href="{% url 'admin_order_list' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
      <span class="material-symbols-outlined">local_shipping</span> Orders
    </a>
    <a href="{% url 'admin_wallet' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
        <span class="material-symbols-outlined">wallet</span>Wallet
      </a>
  </nav>

  <a href="{% url 'admin_logout' %}" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/10">
    <span class="material-symbols-outlined">logout</span> Logout
  </a>
</aside>

<!-- MAIN CONTENT -->
<main class="flex-1 p-8 overflow-y-auto">
<div class="max-w-7xl mx-auto">

<!-- HEADER -->
<header class="flex justify-between items-center mb-6">
  <h1 class="text-4xl font-black text-slate-900">Product Details</h1>
  <a href="{% url 'add_product' %}"
     class="flex items-center justify-center rounded-xl h-12 px-6 bg-primary text-white font-bold hover:bg-primary/90">
    Add New Product
  </a>
  
  <a href="{% url 'soft_deleted_products' %}"
     class="flex items-center justify-center rounded-xl h-12 px-6 bg-primary text-white font-bold hover:bg-primary/90">
    Deleted products
  </a>
</header>

<!-- PRODUCT GRID -->
<div class="bg-white rounded-xl shadow overflow-x-auto">

  <table class="w-full border-collapse">
    <thead class="bg-gray-100 text-left">
      <tr>
        <th class="p-4 font-semibold text-gray-700">Image</th>
        <th class="p-4 font-semibold text-gray-700">Product</th>
        <th class="p-4 font-semibold text-gray-700">Category</th>
        <th class="p-4 font-semibold text-gray-700">Price</th>
        <th class="p-4 font-semibold text-gray-700">Stock</th>
        <th class="p-4 font-semibold text-gray-700 text-center">Actions</th>
      </tr>
    </thead>

    <tbody>
    {% for p in products %}
      <tr class="border-t hover:bg-gray-50 transition">

        <!-- IMAGE -->
        <td class="p-4">
          {% if p.image %}
            <img src="{{ p.image.url }}"
                 class="h-16 w-16 object-cover rounded
                 {% if p.is_delete or p.category.is_delete %}
                   blur-sm opacity-60
                 {% endif %}">
          {% else %}
            <span class="material-symbols-outlined text-gray-400 text-4xl">
              image
            </span>
          {% endif %}
        </td>

        <!-- PRODUCT -->
        <td class="p-4 font-semibold text-gray-900">
          {{ p.title }}
        </td>

        <!-- CATEGORY -->
        <td class="p-4 text-gray-600">
          {{ p.category }}
        </td>

        <!-- PRICE -->
        <td class="p-4 font-bold text-primary">
          â‚¹{{ p.price }}
        </td>

        <!-- STOCK -->
        <td class="p-4">
          {% if p.quantity > 0 %}
            <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold">
              In Stock
            </span>
          {% else %}
            <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold">
              Out of Stock
            </span>
          {% endif %}
        </td>

        <!-- ACTIONS -->
        <td class="p-4 text-center">
          <div class="flex justify-center gap-2">

            <a href="{% url 'product_detail' p.id %}"
               class="p-2 rounded bg-gray-100 hover:bg-gray-200 text-gray-700">
              <span class="material-symbols-outlined">visibility</span>
            </a>

            <a href="{% url 'edit_product' p.id %}"
               class="p-2 rounded bg-blue-100 hover:bg-blue-200 text-blue-700">
              <span class="material-symbols-outlined">edit</span>
            </a>

            <a href="{% url 'delete_product' p.id %}"
               class="p-2 rounded bg-red-100 hover:bg-red-200 text-red-700">
              <span class="material-symbols-outlined">delete</span>
            </a>

          </div>
        </td>

      </tr>
    {% empty %}
      <tr>
        <td colspan="6" class="p-8 text-center text-gray-500">
          No products found.
        </td>
      </tr>
    {% endfor %}
    </tbody>

  </table>
</div>

</div>
</main>
</div>
</body>
</html>
